<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Websocket Smartcard Signer Test Page</title>
<script type="text/javascript" src="websocket_smartcard_signer_lib.js"></script>
<script type="text/javascript">
function signTest(){
    document.getElementById('resultsTxt').value = '';
    
    websocket_smartcard_signer.setLogHandler(function(logData){
        document.getElementById('logTxt').value += logData+'\n';
    }).cleanData()
    .addDataTest()
    .addData('secondItem', 'dGVzdA==')
    .sign(function(signedDataList){
        document.getElementById('resultsTxt').value += 'Websocket returned data : ' + JSON.stringify(signedDataList)+'\n';
    }, function(errorMessage){
        document.getElementById('resultsTxt').value += 'Websocket returned error : ' + errorMessage+'\n';
    });
}
</script>
</head>
<body>
    <input type="button" value="Start" onclick="signTest();"/>
    <a href="websocket_smartcard_signer.jnlp">Launch Server</a>
    <br><b>RESULTS</b><br>
    <textarea id="resultsTxt" style="margin: 0px; width: 100%; height: 200px;"></textarea>
    <br><b>LOG</b><br>
    <textarea id="logTxt" style="margin: 0px; width: 100%; height: 200px;"></textarea>
</body>
</html>